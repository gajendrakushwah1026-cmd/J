<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JITU | Premium Vault</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Google AdSense Global Script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3849531167902850" crossorigin="anonymous"></script>

    <style>
        :root { --primary: #4f46e5; --secondary: #7c3aed; --bg: #fcfcfd; }
        body { font-family: 'Outfit', sans-serif; background-color: var(--bg); color: #1e293b; margin: 0; }
        .premium-card { background: white; border: 1px solid rgba(0, 0, 0, 0.04); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.02); transition: all 0.4s ease; border-radius: 2rem; }
        .premium-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px -12px rgba(79, 70, 229, 0.12); }
        .btn-gradient { background: linear-gradient(135deg, var(--primary), var(--secondary)); }
        .glass-nav { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(0, 0, 0, 0.05); }
        .ad-box { background: #fff; border: 1px solid #f1f5f9; border-radius: 2rem; padding: 15px; margin: 25px auto; max-width: 400px; min-height: 250px; display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.02); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="min-h-screen pb-12">

<nav class="glass-nav sticky top-0 z-50 px-6 py-4">
    <div class="max-w-6xl mx-auto flex items-center justify-between">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 btn-gradient rounded-xl flex items-center justify-center text-white font-black text-xl italic shadow-lg">J</div>
            <span class="text-2xl font-black tracking-tighter">JITU</span>
        </div>
        <div class="flex items-center gap-2">
            <button id="addBtn" onclick="openAddModal()" class="hidden btn-gradient text-white px-5 py-2 rounded-xl text-xs font-bold shadow-md">+ Add</button>
            <button onclick="openLoginModal()" id="authBtn" class="bg-gray-50 text-gray-600 px-4 py-2 rounded-xl text-xs font-bold border border-gray-100">Admin</button>
        </div>
    </div>
</nav>

<section class="max-w-4xl mx-auto px-6 pt-10 text-center">
    <h2 class="text-4xl md:text-5xl font-black text-gray-900 mb-6 tracking-tight">Focus & <span class="text-indigo-600">Learn.</span></h2>
    <div class="relative max-w-xl mx-auto mb-6">
        <input id="searchInput" type="text" placeholder="Search lessons..." class="w-full bg-white border border-gray-100 px-7 py-4 rounded-2xl text-md shadow-xl outline-none focus:ring-4 focus:ring-indigo-50 transition-all">
    </div>

    <!-- YOUR REAL ADSENSE AD UNIT -->
    <div class="ad-box">
        <p class="text-[9px] text-gray-300 font-bold tracking-widest mb-3 italic">ADVERTISEMENT</p>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-3849531167902850"
             data-ad-slot="7504780374"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>
</section>

<main class="max-w-7xl mx-auto px-6 mt-6">
    <div id="filterBar" class="flex gap-2 mb-8 overflow-x-auto no-scrollbar pb-2 justify-start md:justify-center relative z-20"></div>
    <div id="loadingUI" class="flex flex-col items-center py-20"><div class="w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"></div></div>
    <div id="videoGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 hidden"></div>
</main>

<!-- Footer with Legal Links (Important for AdSense) -->
<footer class="mt-20 py-10 text-center border-t border-gray-50">
    <div class="flex flex-wrap justify-center gap-6 mb-6">
        <button onclick="showLegal('about')" class="text-xs font-bold text-gray-400 hover:text-indigo-600 uppercase tracking-widest">About Us</button>
        <button onclick="showLegal('privacy')" class="text-xs font-bold text-gray-400 hover:text-indigo-600 uppercase tracking-widest">Privacy Policy</button>
        <button onclick="showLegal('contact')" class="text-xs font-bold text-gray-400 hover:text-indigo-600 uppercase tracking-widest">Contact Us</button>
    </div>
    <p class="text-[10px] font-black tracking-[0.3em] uppercase text-gray-300">© 2025 JITU PREMIUM VAULT</p>
</footer>

<!-- Modals -->
<div id="modalOverlay" class="fixed inset-0 bg-gray-950/40 backdrop-blur-md hidden z-[100] items-center justify-center p-6">
    <!-- Admin Login -->
    <div id="loginModal" class="bg-white rounded-3xl w-full max-w-xs p-8 shadow-2xl hidden">
        <h3 class="text-xl font-black mb-6 text-center">Admin Access</h3>
        <input id="passInput" type="password" placeholder="Pass Key" class="w-full bg-gray-50 border-0 p-4 rounded-2xl mb-6 text-center text-2xl font-black tracking-[0.3em] outline-none">
        <button onclick="tryLogin()" class="w-full btn-gradient text-white py-4 rounded-2xl font-bold">Verify</button>
    </div>

    <!-- Add Video -->
    <div id="addModal" class="bg-white rounded-3xl w-full max-w-md p-10 shadow-2xl hidden">
        <h3 class="text-2xl font-black mb-6">Add Video</h3>
        <div class="space-y-4">
            <input id="vTitle" type="text" placeholder="Title" class="w-full bg-gray-50 p-4 rounded-xl outline-none">
            <input id="vSub" type="text" placeholder="Subject" class="w-full bg-gray-50 p-4 rounded-xl outline-none">
            <input id="vUrl" type="text" placeholder="YouTube URL" class="w-full bg-gray-50 p-4 rounded-xl outline-none">
            <button onclick="saveVideo()" class="w-full btn-gradient text-white py-4 rounded-xl font-bold uppercase tracking-widest">Save Now</button>
            <button onclick="closeModals()" class="w-full text-gray-400 text-[10px] font-bold mt-2">CLOSE</button>
        </div>
    </div>

    <!-- Legal Content Modal -->
    <div id="legalModal" class="bg-white rounded-3xl w-full max-w-2xl p-8 shadow-2xl hidden max-h-[80vh] overflow-y-auto">
        <h3 id="legalTitle" class="text-2xl font-black mb-4 text-indigo-600 uppercase italic"></h3>
        <div id="legalBody" class="text-sm text-gray-600 leading-relaxed space-y-4"></div>
        <button onclick="closeModals()" class="w-full btn-gradient text-white py-3 rounded-xl font-bold mt-8">I UNDERSTAND</button>
    </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";
import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyB1bJg4JrtFmceuAZvJaMXgUUhxCf1UKdo",
  authDomain: "not-13c89.firebaseapp.com",
  projectId: "not-13c89",
  storageBucket: "not-13c89.firebasestorage.app",
  messagingSenderId: "684410233370",
  appId: "1:684410233370:web:0ed671c584120a4fc1a7a3"
};

let db, auth, videoList = [], isAdmin = false, activeFilter = 'All';
const PASS_KEY = "Jitu9027", COLLECTION_ID = "jitu_ultra_premium_v2";

async function startup() {
    try {
        const app = initializeApp(firebaseConfig);
        db = getFirestore(app);
        auth = getAuth(app);
        await signInAnonymously(auth);
        onAuthStateChanged(auth, user => { if(user) listenToCloud(); });
    } catch(e) { console.error("Cloud Error"); }
}

function listenToCloud() {
    const ref = collection(db, 'artifacts', COLLECTION_ID, 'public', 'data', 'videos');
    onSnapshot(ref, snap => {
        videoList = snap.docs.map(d => ({ id: d.id, ...d.data() }));
        videoList.sort((a,b) => (b.createdAt || 0) - (a.createdAt || 0));
        document.getElementById('loadingUI').style.display = 'none';
        document.getElementById('videoGrid').style.display = 'grid';
        render();
    });
}

window.tryLogin = () => {
    if(document.getElementById('passInput').value === PASS_KEY) {
        isAdmin = true;
        document.getElementById('addBtn').classList.remove('hidden');
        closeModals();
        render();
    } else alert("Galat Key!");
};

window.saveVideo = async () => {
    const title = document.getElementById('vTitle').value;
    const subject = document.getElementById('vSub').value || 'General';
    const url = document.getElementById('vUrl').value;
    const ytId = url.match(/(?:v=|\/|embed\/|youtu.be\/)([0-9A-Za-z_-]{11})/)?.[1];
    if(!title || !ytId) return alert("Sari details bharein!");
    try {
        const ref = collection(db, 'artifacts', COLLECTION_ID, 'public', 'data', 'videos');
        await addDoc(ref, { title, subject, url, ytId, createdAt: Date.now() });
        closeModals();
    } catch(e) { alert("Error saving."); }
};

window.deleteMe = async (id) => {
    if(confirm("Delete karna hai?")) await deleteDoc(doc(db, 'artifacts', COLLECTION_ID, 'public', 'data', 'videos', id));
};

window.showLegal = (type) => {
    const title = document.getElementById('legalTitle');
    const body = document.getElementById('legalBody');
    document.getElementById('modalOverlay').classList.remove('hidden');
    document.getElementById('modalOverlay').classList.add('flex');
    document.getElementById('legalModal').classList.remove('hidden');

    if(type === 'about') {
        title.innerText = "About Jitu Vault";
        body.innerHTML = "<p>JITU Premium Vault is a curated educational platform designed to provide high-quality learning resources to students. We organize the best educational content from YouTube to help you focus and learn effectively without distractions.</p>";
    } else if(type === 'privacy') {
        title.innerText = "Privacy Policy";
        body.innerHTML = "<p>Your privacy is important to us. We do not collect personal data from our visitors. We use Google AdSense to serve ads, which may use cookies to show relevant content. By using this site, you agree to our use of these non-intrusive technologies.</p><p>We do not sell or share any user information.</p>";
    } else if(type === 'contact') {
        title.innerText = "Contact Us";
        body.innerHTML = "<p>Have questions or suggestions? Reach out to us!</p><p><b>Email:</b> support@jitu-vault.com</p><p>We aim to respond to all inquiries within 48 hours.</p>";
    }
};

window.setFilter = (s) => { activeFilter = s; render(); };
window.openLoginModal = () => isAdmin ? location.reload() : showModal('loginModal');
window.openAddModal = () => showModal('addModal');
window.closeModals = () => {
    document.getElementById('modalOverlay').classList.add('hidden');
    document.getElementById('loginModal').classList.add('hidden');
    document.getElementById('addModal').classList.add('hidden');
    document.getElementById('legalModal').classList.add('hidden');
};

function showModal(id) {
    document.getElementById('modalOverlay').classList.remove('hidden');
    document.getElementById('modalOverlay').classList.add('flex');
    document.getElementById(id).classList.remove('hidden');
}

window.render = () => {
    const container = document.getElementById('videoGrid');
    const filters = document.getElementById('filterBar');
    const search = document.getElementById('searchInput').value.toLowerCase();
    
    const subs = ['All', ...new Set(videoList.map(v => v.subject))];
    filters.innerHTML = subs.map(s => `
        <button onclick="setFilter('${s}')" class="px-5 py-2.5 rounded-2xl text-[10px] font-black transition-all border ${activeFilter === s ? 'bg-indigo-600 text-white' : 'bg-white text-gray-400 border-gray-100'}">
            ${s.toUpperCase()}
        </button>
    `).join('');

    const filtered = videoList.filter(v => (activeFilter === 'All' || v.subject === activeFilter) && v.title.toLowerCase().includes(search));
    container.innerHTML = filtered.map(v => `
        <div class="premium-card overflow-hidden group">
            <div class="relative overflow-hidden">
                <img src="https://img.youtube.com/vi/${v.ytId}/mqdefault.jpg" class="w-full aspect-video object-cover transition-transform duration-500 group-hover:scale-105">
                <div class="absolute top-3 left-3 bg-white/95 px-3 py-1 rounded-xl text-[9px] font-black text-indigo-600 uppercase tracking-widest shadow-sm">
                    ${v.subject}
                </div>
            </div>
            <div class="p-6">
                <h4 class="font-bold text-gray-900 line-clamp-2 h-10 mb-6 leading-tight text-xs">${v.title}</h4>
                <div class="flex items-center justify-between">
                    <a href="${v.url}" target="_blank" class="bg-indigo-50 text-indigo-600 px-5 py-2 rounded-xl text-[10px] font-black hover:bg-indigo-600 hover:text-white transition-all">WATCH ▶</a>
                    ${isAdmin ? `<button onclick="deleteMe('${v.id}')" class="w-8 h-8 rounded-xl bg-red-50 text-red-500 flex items-center justify-center text-xs">✕</button>` : ''}
                </div>
            </div>
        </div>
    `).join('');
};

document.getElementById('searchInput').addEventListener('input', render);
startup();
</script>
</body>
    </html>
